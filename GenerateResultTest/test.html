<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2020 Census Data Insights</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: #000;
            color: #fff;
            padding: 20px 0;
            text-align: center;
        }
        h1 {
            margin: 0;
        }
        nav {
            background-color: #333;
            padding: 10px 0;
        }
        nav ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
        }
        nav ul li {
            margin: 0 10px;
        }
        nav ul li a {
            color: #fff;
            text-decoration: none;
        }
        .chart-container {
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            padding: 20px;
        }
        .chart-title {
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        .insights {
            background-color: #f9f9f9;
            border-left: 4px solid #333;
            padding: 10px;
            margin-top: 10px;
        }
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>2020 Census Data Insights</h1>
    </header>
    <nav>
        <ul>
            <li><a href="#age-distribution">Age Distribution</a></li>
            <li><a href="#education-gender">Education by Gender</a></li>
            <li><a href="#occupation">Occupation</a></li>
            <li><a href="#income">Income Distribution</a></li>
        </ul>
    </nav>
    <div class="container">
        <div id="age-distribution" class="chart-container">
            <h2 class="chart-title">Age Distribution</h2>
            <div id="age-chart"></div>
            <div class="insights">
                <h3>Key Insights:</h3>
                <ul id="age-insights"></ul>
            </div>
        </div>
        <div id="education-gender" class="chart-container">
            <h2 class="chart-title">Education Level by Gender</h2>
            <div id="education-chart"></div>
            <div class="insights">
                <h3>Key Insights:</h3>
                <ul id="education-insights"></ul>
            </div>
        </div>
        <div id="occupation" class="chart-container">
            <h2 class="chart-title">Occupation Distribution</h2>
            <div id="occupation-chart"></div>
            <div class="insights">
                <h3>Key Insights:</h3>
                <ul id="occupation-insights"></ul>
            </div>
        </div>
        <div id="income" class="chart-container">
            <h2 class="chart-title">Income Distribution</h2>
            <div id="income-chart"></div>
            <div class="insights">
                <h3>Key Insights:</h3>
                <ul id="income-insights"></ul>
            </div>
        </div>
    </div>
    <script>
        // Age Distribution Chart
        const ageData = {
            x: Object.keys(data.age_distribution.age_counts),
            y: Object.values(data.age_distribution.age_counts),
            type: 'bar',
            marker: {color: '#333'}
        };
        Plotly.newPlot('age-chart', [ageData], {
            title: 'Age Distribution',
            xaxis: {title: 'Age'},
            yaxis: {title: 'Count'}
        });

        // Education Level by Gender Chart
        const educationData = data.education_by_gender.education_by_gender;
        const educationLevels = Object.keys(educationData);
        const maleData = educationLevels.map(level => educationData[level].Male);
        const femaleData = educationLevels.map(level => educationData[level].Female);

        const trace1 = {
            x: educationLevels,
            y: maleData,
            name: 'Male',
            type: 'bar'
        };
        const trace2 = {
            x: educationLevels,
            y: femaleData,
            name: 'Female',
            type: 'bar'
        };
        Plotly.newPlot('education-chart', [trace1, trace2], {
            barmode: 'group',
            title: 'Education Level by Gender',
            xaxis: {title: 'Education Level'},
            yaxis: {title: 'Count'}
        });

        // Occupation Distribution Chart
        const occupationData = data.occupation_distribution.occupation_counts;
        const occupations = Object.keys(occupationData);
        const occupationCounts = Object.values(occupationData);

        const occupationTrace = {
            labels: occupations,
            values: occupationCounts,
            type: 'pie'
        };
        Plotly.newPlot('occupation-chart', [occupationTrace], {
            title: 'Occupation Distribution'
        });

        // Income Distribution Chart
        const incomeData = data.income_distribution.income_counts;
        const incomeRanges = Object.keys(incomeData);
        const incomeCounts = Object.values(incomeData);

        const incomeTrace = {
            x: incomeRanges,
            y: incomeCounts,
            type: 'bar',
            marker: {color: '#333'}
        };
        Plotly.newPlot('income-chart', [incomeTrace], {
            title: 'Income Distribution',
            xaxis: {title: 'Income Range'},
            yaxis: {title: 'Count'}
        });

        // Generate insights
        function generateInsights(data, elementId) {
            const insights = [];
            const values = Object.values(data);
            const keys = Object.keys(data);
            const max = Math.max(...values);
            const min = Math.min(...values);
            const maxKey = keys[values.indexOf(max)];
            const minKey = keys[values.indexOf(min)];
            const sum = values.reduce((a, b) => a + b, 0);
            const avg = sum / values.length;

            insights.push(`Highest value: ${maxKey} (${max})`);
            insights.push(`Lowest value: ${minKey} (${min})`);
            insights.push(`Average value: ${avg.toFixed(2)}`);

            const insightsList = document.getElementById(elementId);
            insights.forEach(insight => {
                const li = document.createElement('li');
                li.textContent = insight;
                insightsList.appendChild(li);
            });
        }

        generateInsights(data.age_distribution.age_counts, 'age-insights');
        generateInsights(data.education_by_gender.education_by_gender, 'education-insights');
        generateInsights(data.occupation_distribution.occupation_counts, 'occupation-insights');
        generateInsights(data.income_distribution.income_counts, 'income-insights');
    </script>
</body>
</html>